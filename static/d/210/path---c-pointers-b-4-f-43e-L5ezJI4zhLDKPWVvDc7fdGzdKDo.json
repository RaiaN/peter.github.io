{"data":{"site":{"siteMetadata":{"author":"Peter Leontev"}},"markdownRemark":{"id":"c4d63596-824c-524e-be41-41c48aafc38f","excerpt":"Imagine the following situation in Unreal Engine 4 gameplay code: SoundSystem  can be invalid but what does that mean? Is is OK situation to just use IsValid…","html":"<p>Imagine the following situation in Unreal Engine 4 gameplay code:</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">APlayer<span class=\"token operator\">::</span><span class=\"token function\">OnAttacked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    USoundSystem<span class=\"token operator\">*</span> SoundSystem <span class=\"token operator\">=</span> GameInstance<span class=\"token operator\">-></span><span class=\"token function\">GetSoundSystem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">IsValid</span><span class=\"token punctuation\">(</span>SoundSystem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        SoundSystem<span class=\"token operator\">-></span><span class=\"token function\">PlaySoundCue</span><span class=\"token punctuation\">(</span>OnAttackedSoundCue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>SoundSystem</strong> can be invalid but what does that mean? Is is OK situation to just use IsValid() and do nothing? This issue is more interesting that it seems.</p>\n<p>Lets look at this issue from the different angle: if <strong>SoundSystem</strong> is not valid in OnAttacked() context then maybe we should tell someone about it? To do that one can use multiple methods: return values, delegates calling, writing some error message to log… but wait! <strong>SoundSystem</strong> is not valid! </p>\n<p>When some game system is not valid then what options do we have to fix the problem? First, get instance of the system:</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">APlayer<span class=\"token operator\">::</span><span class=\"token function\">OnAttacked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    USoundSystem<span class=\"token operator\">*</span> SoundSystem <span class=\"token operator\">=</span> GameInstance<span class=\"token operator\">-></span><span class=\"token function\">GetSoundSystem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">IsValid</span><span class=\"token punctuation\">(</span>SoundSystem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        SoundSystem<span class=\"token operator\">-></span><span class=\"token function\">PlaySoundCue</span><span class=\"token punctuation\">(</span>OnAttackedSoundCue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Happy reading!</p>","frontmatter":{"title":"Handling invalid C++ pointers","date":"April 21, 2019","description":"In this article I will briefly explain approaches to check if a pointer is valid and why it is important."}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/c++_pointers/","previous":{"fields":{"slug":"/motivation/"},"frontmatter":{"date":"2019-04-19T15-00","title":"Technical blog in 2019?"}},"next":null}}